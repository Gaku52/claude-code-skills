# ğŸ“š Knowledge Base - æ•™è¨“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰ã‚¬ã‚¤ãƒ‰

> **ç›®çš„**: ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‹ã‚‰æŠ½å‡ºã•ã‚ŒãŸæ•™è¨“ãƒ»ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’ä½“ç³»çš„ã«ç®¡ç†ã—ã€æ¤œç´¢å¯èƒ½ã§å†åˆ©ç”¨ã—ã‚„ã™ã„ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹

## ğŸ“š ç›®æ¬¡

1. [ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã®ä¾¡å€¤](#ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã®ä¾¡å€¤)
2. [æ•™è¨“ã®ç¨®é¡ã¨åˆ†é¡](#æ•™è¨“ã®ç¨®é¡ã¨åˆ†é¡)
3. [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ](#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ )
4. [æ•™è¨“ã®è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ](#æ•™è¨“ã®è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ)
5. [æŠ½å‡ºãƒ—ãƒ­ã‚»ã‚¹](#æŠ½å‡ºãƒ—ãƒ­ã‚»ã‚¹)
6. [æ¤œç´¢æ€§ã®å‘ä¸Š](#æ¤œç´¢æ€§ã®å‘ä¸Š)
7. [å®Ÿè·µä¾‹](#å®Ÿè·µä¾‹)

---

## ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã®ä¾¡å€¤

### ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆè¨˜éŒ² vs æ•™è¨“ãƒŠãƒ¬ãƒƒã‚¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ incident-logger (ç”Ÿã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆè¨˜éŒ²)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ»æ™‚ç³»åˆ—ã®äº‹å®Ÿè¨˜éŒ²                        â”‚
â”‚ ãƒ»å€‹åˆ¥äº‹ä¾‹ã®è©³ç´°                          â”‚
â”‚ ãƒ»ç‰¹å®šã®çŠ¶æ³ãƒ»ç’°å¢ƒ                        â”‚
â”‚ ãƒ»What happened? (ä½•ãŒèµ·ããŸã‹)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“ æŠ½å‡ºãƒ»ä¸€èˆ¬åŒ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ lessons-learned (æ•™è¨“ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ»ä¸€èˆ¬åŒ–ã•ã‚ŒãŸãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹            â”‚
â”‚ ãƒ»å†åˆ©ç”¨å¯èƒ½ãªãƒ‘ã‚¿ãƒ¼ãƒ³                    â”‚
â”‚ ãƒ»æ™®éçš„ãªåŸå‰‡                           â”‚
â”‚ ãƒ»What to do? (ã©ã†ã™ã¹ãã‹)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…·ä½“ä¾‹ã®æ¯”è¼ƒ

**ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆè¨˜éŒ²**:
```markdown
# [HIGH] iOS 15ã§ãƒ­ã‚°ã‚¤ãƒ³å¾Œã«ç”»é¢ãŒçœŸã£ç™½

## ç™ºç”Ÿæ—¥æ™‚
2025-12-30 10:15:00 JST

## åŸå› 
iOS 15ã§ã¯ `NavigationStack` ãŒæœªå¯¾å¿œ

## è§£æ±ºç­–
iOS 16+ ã¨ iOS 15 ã§åˆ†å²å‡¦ç†
```

**â†“ æŠ½å‡ºãƒ»ä¸€èˆ¬åŒ–**

**æ•™è¨“ãƒŠãƒ¬ãƒƒã‚¸**:
```markdown
# æœ€å°ã‚µãƒãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã®å‹•ä½œç¢ºèª

## æ•™è¨“
æ–°ã—ã„APIã‚’ä½¿ç”¨ã™ã‚‹éš›ã¯ã€å¿…ãšæœ€å°ã‚µãƒãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å‹•ä½œç¢ºèªã™ã‚‹

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- `#available` ã§åˆ†å²
- CI/CDã«æœ€å°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆè¿½åŠ 
- Preview ã® iOS ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æœ€å°ã«è¨­å®š

## é©ç”¨ç®‡æ‰€
- iOS ã®æ–°APIä½¿ç”¨æ™‚å…¨èˆ¬
- NavigationStack, SwiftUI Charts, etc.

## æ ¹æ‹ 
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#002: iOS 15 ã§ NavigationStack ã‚¯ãƒ©ãƒƒã‚·ãƒ¥
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#015: iOS 14 ã§ Charts API æœªå¯¾å¿œ
```

### ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã®ROI

**å°å…¥å‰ï¼ˆ3ãƒ¶æœˆå¹³å‡ï¼‰**:
```
åŒã˜å•é¡Œã®å†ç™º: æœˆ5å›
æ–°è¦å•é¡Œè§£æ±ºæ™‚é–“: å¹³å‡ 4.2h
ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹é©ç”¨: ä¸æ˜ç­
```

**å°å…¥å¾Œï¼ˆ3ãƒ¶æœˆå¹³å‡ï¼‰**:
```
åŒã˜å•é¡Œã®å†ç™º: æœˆ0.5å›ï¼ˆ90%å‰Šæ¸›ï¼‰
æ–°è¦å•é¡Œè§£æ±ºæ™‚é–“: å¹³å‡ 1.5hï¼ˆ64%çŸ­ç¸®ï¼‰
ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹é©ç”¨: 85%
```

**åŠ¹æœ**:
- **æœˆ40æ™‚é–“ã®å‰Šæ¸›** = é–‹ç™ºè€…1äººåˆ†ã®10%
- **å“è³ªå‘ä¸Š**: å†ç™ºç‡90%å‰Šæ¸›
- **ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŸ­ç¸®**: æ–°ãƒ¡ãƒ³ãƒãƒ¼ãŒéå»ã®çŸ¥è¦‹ã‚’å³åº§ã«æ´»ç”¨

---

## æ•™è¨“ã®ç¨®é¡ã¨åˆ†é¡

### 1. Best Practicesï¼ˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ï¼‰

**å®šç¾©**: ã€Œã“ã†ã™ã¹ãã€ã¨ã„ã†æ¨å¥¨ã•ã‚Œã‚‹æ–¹æ³•

**ä¾‹**:
```markdown
# Optional ã‚’å®‰å…¨ã«æ‰±ã†

## æ•™è¨“
force unwrap (!) ã¯ä½¿ã‚ãšã€guard/if let/nil coalescing ã‚’ä½¿ç”¨

## ç†ç”±
- force unwrap ã¯å®Ÿè¡Œæ™‚ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã®ãƒªã‚¹ã‚¯
- ãƒ‡ãƒãƒƒã‚°ãŒå›°é›£ï¼ˆã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ãŒä¸æ˜ç­ï¼‰

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
```swift
// âŒ Bad: force unwrap
let user = optionalUser!
print(user.name)

// âœ… Good: guard let
guard let user = optionalUser else {
    logger.error("User is nil")
    return
}
print(user.name)

// âœ… Good: if let
if let user = optionalUser {
    print(user.name)
}

// âœ… Good: nil coalescing
let userName = optionalUser?.name ?? "Guest"
```

## é©ç”¨ç®‡æ‰€
- ã™ã¹ã¦ã® Optional å‡¦ç†
- ç‰¹ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã€API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒª

## æ ¹æ‹ 
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#042: force unwrap ã§æœ¬ç•ªã‚¯ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆ1000ãƒ¦ãƒ¼ã‚¶ãƒ¼å½±éŸ¿ï¼‰
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#089: nil ãƒã‚§ãƒƒã‚¯æ¼ã‚Œã§ãƒ‡ãƒ¼ã‚¿æå¤±
```

### 2. Anti-Patternsï¼ˆã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

**å®šç¾©**: ã€Œé¿ã‘ã‚‹ã¹ãã€æ‚ªã„ãƒ‘ã‚¿ãƒ¼ãƒ³

**ä¾‹**:
```markdown
# Massive View Controller ã‚’é¿ã‘ã‚‹

## æ•™è¨“
ViewController ã«å…¨ã¦ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’è©°ã‚è¾¼ã¾ãªã„

## å•é¡Œ
- ãƒ†ã‚¹ãƒˆãŒå›°é›£
- å¯èª­æ€§ãŒä½ã„
- å†åˆ©ç”¨æ€§ãŒãªã„
- è²¬å‹™ãŒä¸æ˜ç¢º

## ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³
```swift
// âŒ Bad: 1000è¡Œã® ViewController
class UserViewController: UIViewController {
    // UI setup
    // API call
    // Data parsing
    // Business logic
    // Validation
    // Navigation
    // Error handling
    // Analytics
    // ...
}
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
```swift
// âœ… Good: MVVM ã§è²¬å‹™åˆ†é›¢
class UserViewController: UIViewController {
    private let viewModel: UserViewModel

    override func viewDidLoad() {
        super.viewDidLoad()
        bindViewModel()
    }

    private func bindViewModel() {
        viewModel.user
            .sink { [weak self] user in
                self?.updateUI(user)
            }
    }
}

class UserViewModel {
    @Published var user: User?
    private let repository: UserRepository

    func loadUser() {
        // Business logic
    }
}
```

## æ ¹æ‹ 
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#023: 1500è¡Œã®VCã§ãƒã‚°ä¿®æ­£ã«3æ—¥
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆA: MVVM å°å…¥å¾Œã€ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ 45% â†’ 85%
```

### 3. Patternsï¼ˆæˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

**å®šç¾©**: å®Ÿéš›ã«æˆåŠŸã—ãŸè¨­è¨ˆãƒ»å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

**ä¾‹**:
```markdown
# Repository ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ãƒ‡ãƒ¼ã‚¿å±¤ã‚’æŠ½è±¡åŒ–

## æ•™è¨“
ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆAPIã€DBã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰ã‚’ Repository ã§æŠ½è±¡åŒ–

## ãƒ¡ãƒªãƒƒãƒˆ
- ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®åˆ‡ã‚Šæ›¿ãˆãŒå®¹æ˜“
- ãƒ†ã‚¹ãƒˆãŒç°¡å˜ï¼ˆMock Repositoryï¼‰
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨ãƒ‡ãƒ¼ã‚¿å±¤ã®åˆ†é›¢

## ãƒ‘ã‚¿ãƒ¼ãƒ³
```
View â†’ ViewModel â†’ UseCase â†’ Repository â†’ DataSource
                                   â†“
                              API / DB / Cache
```

## å®Ÿè£…ä¾‹
```swift
// Protocol ã§æŠ½è±¡åŒ–
protocol UserRepository {
    func fetchUsers() async throws -> [User]
    func saveUser(_ user: User) async throws
}

// æœ¬ç•ªå®Ÿè£…
class UserRepositoryImpl: UserRepository {
    private let api: APIClient
    private let db: Database

    func fetchUsers() async throws -> [User] {
        // API ã‹ã‚‰å–å¾—ã€DB ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
        let users = try await api.fetchUsers()
        try await db.save(users)
        return users
    }
}

// ãƒ†ã‚¹ãƒˆç”¨ Mock
class MockUserRepository: UserRepository {
    var mockUsers: [User] = []

    func fetchUsers() async throws -> [User] {
        return mockUsers
    }
}
```

## ã„ã¤ä½¿ã†ã‹
- ä¸­è¦æ¨¡ä»¥ä¸Šã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆAPI + DBï¼‰
- ãƒ†ã‚¹ãƒˆã‚’é‡è¦–ã™ã‚‹å ´åˆ

## æˆåŠŸäº‹ä¾‹
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆA: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ 85%é”æˆ
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆB: APIåˆ‡ã‚Šæ›¿ãˆãŒ2æ™‚é–“ã§å®Œäº†

## æ ¹æ‹ 
- Clean Architecture åŸå‰‡
- DDD (Domain-Driven Design)
```

### 4. Optimizationsï¼ˆæœ€é©åŒ–æ‰‹æ³•ï¼‰

**å®šç¾©**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ã®å®Ÿç¸¾ã‚ã‚‹æ‰‹æ³•

**ä¾‹**:
```markdown
# LazyVGrid ã§å¤§é‡ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã‚’æœ€é©åŒ–

## æ•™è¨“
å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºã«ã¯ Lazy ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ + ã‚­ãƒ£ãƒƒã‚·ãƒ¥

## å•é¡Œ
- 1000ä»¶ã®ç”»åƒã‚’ä¸€åº¦ã«è¡¨ç¤º â†’ ãƒ¡ãƒ¢ãƒªä¸è¶³ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥
- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒã‚«ã‚¯ã‚«ã‚¯

## è§£æ±ºç­–
```swift
// âŒ Bad: ã™ã¹ã¦ä¸€åº¦ã«ãƒ­ãƒ¼ãƒ‰
ScrollView {
    VStack {
        ForEach(items) { item in  // 1000ä»¶
            AsyncImage(url: item.imageURL)
                .frame(width: 100, height: 100)
        }
    }
}
// ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: 800MB ğŸ”¥

// âœ… Good: Lazy + ã‚­ãƒ£ãƒƒã‚·ãƒ¥
ScrollView {
    LazyVGrid(columns: columns, spacing: 10) {
        ForEach(items) { item in
            KFImage(URL(string: item.imageURL))
                .placeholder {
                    ProgressView()
                }
                .resizable()
                .frame(width: 100, height: 100)
        }
    }
}
// ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: 150MB âœ¨
```

## åŠ¹æœ
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: 800MB â†’ 150MBï¼ˆâ–¼ 81%ï¼‰
- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«: ã‚«ã‚¯ã‚«ã‚¯ â†’ ã‚¹ãƒ ãƒ¼ã‚º
- ã‚¯ãƒ©ãƒƒã‚·ãƒ¥: ãªããªã£ãŸ

## ã„ã¤ä½¿ã†ã‹
- ãƒªã‚¹ãƒˆè¡¨ç¤ºãŒ100ä»¶ä»¥ä¸Š
- ç”»åƒãƒ»å‹•ç”»ãªã©ã®é‡ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé‡è¦

## ãƒ„ãƒ¼ãƒ«
- Kingfisher (ç”»åƒã‚­ãƒ£ãƒƒã‚·ãƒ¥)
- LazyVStack/LazyVGrid
- Instruments (ãƒ¡ãƒ¢ãƒªãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°)

## æ ¹æ‹ 
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#067: ãƒ¡ãƒ¢ãƒªã‚¯ãƒ©ãƒƒã‚·ãƒ¥
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆB: ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ 3.2 â†’ 4.5
```

### 5. Toolsï¼ˆãƒ„ãƒ¼ãƒ«ãƒ»æ‰‹æ³•ï¼‰

**å®šç¾©**: å•é¡Œè§£æ±ºã«æœ‰åŠ¹ãªãƒ„ãƒ¼ãƒ«ãƒ»æ‰‹æ³•

**ä¾‹**:
```markdown
# Instruments ã§ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯æ¤œå‡º

## æ•™è¨“
ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã¯ Instruments ã® Leaks ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§æ—©æœŸç™ºè¦‹

## ä½¿ã„æ–¹
1. Xcode ãƒ¡ãƒ‹ãƒ¥ãƒ¼: `Product` > `Profile`ï¼ˆCmd+Iï¼‰
2. `Leaks` ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠ
3. ã‚¢ãƒ—ãƒªã‚’æ“ä½œï¼ˆå•é¡Œã®ç”»é¢ã‚’é–‹ããƒ»é–‰ã˜ã‚‹ã‚’ç¹°ã‚Šè¿”ã™ï¼‰
4. èµ¤ã„ãƒãƒ¼ = ãƒªãƒ¼ã‚¯ç™ºè¦‹ ğŸš¨
5. Details ã§åŸå› ç‰¹å®š

## æˆåŠŸäº‹ä¾‹
```
ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#067: ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯å•é¡Œ
- 3æ—¥é–“æ‚©ã‚“ã  â†’ Instruments ã§10åˆ†ã§ç™ºè¦‹
- åŸå› : WebSocket ã® removeListener æ¼ã‚Œ
```

## Tips
- **å®šæœŸçš„ã«å®Ÿè¡Œ**: ãƒªãƒªãƒ¼ã‚¹å‰å¿…é ˆ
- **è‡ªå‹•åŒ–**: CI/CD ã«çµ„ã¿è¾¼ã‚€ï¼ˆfastlaneï¼‰
- **ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç¢ºä¿**: æ­£å¸¸æ™‚ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’è¨˜éŒ²

## è‡ªå‹•åŒ–ä¾‹
```ruby
# fastlane/Fastfile
lane :profile_memory do
  scan(
    scheme: "MyApp",
    destination: "platform=iOS Simulator,name=iPhone 15 Pro"
  )

  instruments(
    template: "Leaks",
    app: "MyApp.app",
    devices: ["iPhone 15 Pro"]
  )
end
```

## ã„ã¤ä½¿ã†ã‹
- ãƒªãƒªãƒ¼ã‚¹å‰ã®ãƒã‚§ãƒƒã‚¯
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒå¢—åŠ ã—ã¦ã„ã‚‹æ™‚
- ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆã§ OOM (Out of Memory)

## å‚è€ƒ
- [Apple: Instruments User Guide](https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/)
```

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

### æ¨å¥¨æ§‹é€ 

```
lessons/
â”œâ”€â”€ index.md                     # å…¨æ•™è¨“ä¸€è¦§ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”œâ”€â”€ README.md                    # ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã®ä½¿ã„æ–¹
â”‚
â”œâ”€â”€ best-practices/              # ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
â”‚   â”œâ”€â”€ optional-handling.md
â”‚   â”œâ”€â”€ error-handling.md
â”‚   â”œâ”€â”€ async-programming.md
â”‚   â”œâ”€â”€ code-review.md
â”‚   â””â”€â”€ testing.md
â”‚
â”œâ”€â”€ anti-patterns/               # ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³
â”‚   â”œâ”€â”€ massive-view-controller.md
â”‚   â”œâ”€â”€ force-unwrap.md
â”‚   â”œâ”€â”€ god-object.md
â”‚   â””â”€â”€ copy-paste-code.md
â”‚
â”œâ”€â”€ patterns/                    # æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³
â”‚   â”œâ”€â”€ mvvm-repository.md
â”‚   â”œâ”€â”€ coordinator.md
â”‚   â”œâ”€â”€ dependency-injection.md
â”‚   â””â”€â”€ state-management.md
â”‚
â”œâ”€â”€ optimizations/               # æœ€é©åŒ–æ‰‹æ³•
â”‚   â”œâ”€â”€ lazy-loading.md
â”‚   â”œâ”€â”€ caching-strategy.md
â”‚   â”œâ”€â”€ image-optimization.md
â”‚   â””â”€â”€ database-indexing.md
â”‚
â”œâ”€â”€ tools/                       # ãƒ„ãƒ¼ãƒ«ãƒ»æ‰‹æ³•
â”‚   â”œâ”€â”€ instruments.md
â”‚   â”œâ”€â”€ swiftlint.md
â”‚   â”œâ”€â”€ charles-proxy.md
â”‚   â””â”€â”€ fastlane.md
â”‚
â”œâ”€â”€ by-category/                 # ã‚«ãƒ†ã‚´ãƒªåˆ¥ï¼ˆã‚¯ãƒ­ã‚¹ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ï¼‰
â”‚   â”œâ”€â”€ architecture/
â”‚   â”‚   â”œâ”€â”€ mvvm.md â†’ ../../patterns/mvvm-repository.md
â”‚   â”‚   â””â”€â”€ coordinator.md â†’ ../../patterns/coordinator.md
â”‚   â”œâ”€â”€ testing/
â”‚   â”‚   â”œâ”€â”€ unit-testing.md
â”‚   â”‚   â””â”€â”€ ui-testing.md
â”‚   â”œâ”€â”€ performance/
â”‚   â”‚   â”œâ”€â”€ lazy-loading.md â†’ ../../optimizations/lazy-loading.md
â”‚   â”‚   â””â”€â”€ caching.md â†’ ../../optimizations/caching-strategy.md
â”‚   â”œâ”€â”€ security/
â”‚   â”‚   â”œâ”€â”€ keychain.md
â”‚   â”‚   â””â”€â”€ api-security.md
â”‚   â””â”€â”€ deployment/
â”‚       â”œâ”€â”€ ci-cd.md
â”‚       â””â”€â”€ app-store.md
â”‚
â”œâ”€â”€ templates/                   # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ lesson-template.md
â”‚   â”œâ”€â”€ monthly-review.md
â”‚   â””â”€â”€ quarterly-review.md
â”‚
â””â”€â”€ scripts/                     # è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    â”œâ”€â”€ add-lesson.sh
    â”œâ”€â”€ search-lessons.sh
    â”œâ”€â”€ update-index.sh
    â””â”€â”€ lesson-stats.sh
```

### index.md ã®è‡ªå‹•ç”Ÿæˆ

**ã‚¹ã‚¯ãƒªãƒ—ãƒˆ** (`scripts/update-index.sh`):
```bash
#!/bin/bash

OUTPUT_FILE="lessons/index.md"

cat > "$OUTPUT_FILE" <<'EOF'
# ğŸ“š Lessons Learned Index

> è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚`./scripts/update-index.sh` ã§æ›´æ–°ã€‚

## çµ±è¨ˆ

EOF

# çµ±è¨ˆæƒ…å ±
TOTAL=$(find lessons -name "*.md" -not -name "index.md" -not -name "README.md" | wc -l)
BP=$(find lessons/best-practices -name "*.md" | wc -l)
AP=$(find lessons/anti-patterns -name "*.md" | wc -l)
PT=$(find lessons/patterns -name "*.md" | wc -l)
OP=$(find lessons/optimizations -name "*.md" | wc -l)
TL=$(find lessons/tools -name "*.md" | wc -l)

cat >> "$OUTPUT_FILE" <<EOF
| ã‚«ãƒ†ã‚´ãƒª | ä»¶æ•° |
|---------|------|
| **Best Practices** | $BP |
| **Anti-Patterns** | $AP |
| **Patterns** | $PT |
| **Optimizations** | $OP |
| **Tools** | $TL |
| **åˆè¨ˆ** | $TOTAL |

---

## Best Practices

EOF

# Best Practices ã®ãƒªã‚¹ãƒˆç”Ÿæˆ
for file in lessons/best-practices/*.md; do
    if [ -f "$file" ]; then
        title=$(head -n 1 "$file" | sed 's/^# //')
        path=$(echo "$file" | sed 's|lessons/||')
        echo "- [$title]($path)" >> "$OUTPUT_FILE"
    fi
done

cat >> "$OUTPUT_FILE" <<EOF

---

## Anti-Patterns

EOF

# Anti-Patterns ã®ãƒªã‚¹ãƒˆç”Ÿæˆ
for file in lessons/anti-patterns/*.md; do
    if [ -f "$file" ]; then
        title=$(head -n 1 "$file" | sed 's/^# //')
        path=$(echo "$file" | sed 's|lessons/||')
        echo "- [$title]($path)" >> "$OUTPUT_FILE"
    fi
done

# ä»¥ä¸‹åŒæ§˜ã« Patterns, Optimizations, Tools ã‚’è¿½åŠ ...

echo "âœ… index.md generated: $TOTAL lessons"
```

---

## æ•™è¨“ã®è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

**`templates/lesson-template.md`**:
```markdown
# [æ•™è¨“ã®ã‚¿ã‚¤ãƒˆãƒ«]

## æ•™è¨“ï¼ˆä¸€æ–‡ã§ï¼‰

[ä½•ã‚’å­¦ã‚“ã ã‹ï¼Ÿã©ã†ã™ã¹ãã‹ï¼Ÿ]

## ã‚«ãƒ†ã‚´ãƒª

- [ ] Best Practice
- [ ] Anti-Pattern
- [ ] Pattern
- [ ] Optimization
- [ ] Tool

## å•é¡Œãƒ»èƒŒæ™¯

[ãªãœã“ã®æ•™è¨“ãŒå¿…è¦ã‹ï¼Ÿä½•ãŒå•é¡Œã ã£ãŸã‹ï¼Ÿ]

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ / è§£æ±ºç­–

```[language]
[ã‚³ãƒ¼ãƒ‰ä¾‹]
```

## åŠ¹æœãƒ»ãƒ¡ãƒªãƒƒãƒˆ

- [åŠ¹æœ1]
- [åŠ¹æœ2]

## ã„ã¤ä½¿ã†ã‹

- [ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1]
- [ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2]

## æ³¨æ„ç‚¹

- [æ³¨æ„ç‚¹1]
- [æ³¨æ„ç‚¹2]

## æ ¹æ‹ ãƒ»äº‹ä¾‹

- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#XXX: [æ¦‚è¦]
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆY: [æˆåŠŸäº‹ä¾‹]

## é–¢é€£

- [é–¢é€£ã™ã‚‹æ•™è¨“]
- [é–¢é€£ã™ã‚‹Skill]

## ã‚¿ã‚°

`tag1`, `tag2`, `tag3`

## æ›´æ–°å±¥æ­´

- YYYY-MM-DD: åˆç‰ˆä½œæˆ
- YYYY-MM-DD: [æ›´æ–°å†…å®¹]
```

### å®Ÿéš›ã®è¨˜éŒ²ä¾‹

**`lessons/best-practices/async-await.md`**:
```markdown
# async/await ã§éåŒæœŸå‡¦ç†ã‚’ç°¡æ½”ã«æ›¸ã

## æ•™è¨“

Swift ã® async/await ã‚’ä½¿ã£ã¦éåŒæœŸå‡¦ç†ã‚’åŒæœŸå‡¦ç†ã®ã‚ˆã†ã«æ›¸ã

## ã‚«ãƒ†ã‚´ãƒª

- [x] Best Practice
- [ ] Anti-Pattern
- [ ] Pattern
- [ ] Optimization
- [ ] Tool

## å•é¡Œãƒ»èƒŒæ™¯

Callback hellï¼ˆã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯åœ°ç„ï¼‰ã‚„ completion handler ã®å…¥ã‚Œå­ã§å¯èª­æ€§ãŒä½ä¸‹

```swift
// âŒ Bad: Callback hell
fetchUser(id: userId) { user in
    fetchPosts(userId: user.id) { posts in
        fetchComments(postId: posts[0].id) { comments in
            updateUI(user, posts, comments)
        }
    }
}
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```swift
// âœ… Good: async/await
func loadUserData() async throws {
    let user = try await fetchUser(id: userId)
    let posts = try await fetchPosts(userId: user.id)
    let comments = try await fetchComments(postId: posts[0].id)
    updateUI(user, posts, comments)
}

// ä½¿ç”¨ä¾‹
Task {
    do {
        try await loadUserData()
    } catch {
        handleError(error)
    }
}
```

## åŠ¹æœãƒ»ãƒ¡ãƒªãƒƒãƒˆ

- å¯èª­æ€§å‘ä¸Š: åŒæœŸå‡¦ç†ã®ã‚ˆã†ã«èª­ã‚ã‚‹
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒç°¡æ½”: try-catch ã§çµ±ä¸€
- ãƒ‡ãƒãƒƒã‚°ãŒå®¹æ˜“: ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ãŒæ˜ç¢º

## ã„ã¤ä½¿ã†ã‹

- iOS 15+ / macOS 12+ ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å ´åˆ
- éåŒæœŸå‡¦ç†ãŒè¤‡æ•°é€£é–ã™ã‚‹å ´åˆ
- API å‘¼ã³å‡ºã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹

## æ³¨æ„ç‚¹

- `await` ã¯ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ï¼ˆå®‰å…¨ï¼‰
- UI æ›´æ–°ã¯ `@MainActor` ã§
- ã‚­ãƒ£ãƒ³ã‚»ãƒ«å‡¦ç†ã«ã¯ `Task.isCancelled` ã‚’ä½¿ç”¨

```swift
@MainActor
func updateUI() async {
    let data = try await fetchData()
    self.label.text = data.text  // ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã§å®Ÿè¡Œ
}
```

## æ ¹æ‹ ãƒ»äº‹ä¾‹

- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#034: Callback hell ã§ãƒã‚°æ··å…¥ï¼ˆãƒ‡ãƒãƒƒã‚°ã«2æ—¥ï¼‰
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆC: async/await å°å…¥å¾Œã€éåŒæœŸãƒã‚° 70%å‰Šæ¸›

## é–¢é€£

- [error-handling.md](error-handling.md)
- [async-programming.md](async-programming.md)
- ios-development/guides/async-programming.md

## ã‚¿ã‚°

`swift`, `async`, `concurrency`, `ios15+`

## æ›´æ–°å±¥æ­´

- 2025-01-15: åˆç‰ˆä½œæˆ
- 2025-02-01: Task.isCancelled ã®æ³¨æ„ç‚¹è¿½åŠ 
```

---

## æŠ½å‡ºãƒ—ãƒ­ã‚»ã‚¹

### ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‹ã‚‰æ•™è¨“ã¸ã®ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç™ºç”Ÿ                 â”‚
â”‚    incidents/2025/042-crash.md     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆè¨˜éŒ²ï¼ˆincident-loggerï¼‰â”‚
â”‚    - ç™ºç”ŸçŠ¶æ³                       â”‚
â”‚    - åŸå›                           â”‚
â”‚    - è§£æ±ºç­–                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. æ•™è¨“æŠ½å‡ºï¼ˆlessons-learnedï¼‰      â”‚
â”‚    å•ã„ã‹ã‘:                       â”‚
â”‚    - ä½•ã‚’å­¦ã‚“ã ã‹ï¼Ÿ                 â”‚
â”‚    - ä»–ã«é©ç”¨ã§ãã‚‹ã‹ï¼Ÿ             â”‚
â”‚    - ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã§ãã‚‹ã‹ï¼Ÿ           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. æ•™è¨“è¨˜éŒ²                        â”‚
â”‚    lessons/best-practices/xxx.md   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Skillã¸ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯            â”‚
â”‚    å„Skillã®ã‚¬ã‚¤ãƒ‰ãƒ»ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã«åæ˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°                 â”‚
â”‚    lessons/index.md è‡ªå‹•ç”Ÿæˆ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…·ä½“ä¾‹: force unwrap ã‚¯ãƒ©ãƒƒã‚·ãƒ¥

**1. ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆè¨˜éŒ²** (`incidents/2025/042-force-unwrap-crash.md`):
```markdown
# [HIGH] force unwrap ã§ã‚¢ãƒ—ãƒªã‚¯ãƒ©ãƒƒã‚·ãƒ¥

## ç™ºç”Ÿæ—¥æ™‚
2025-01-10 14:23

## åŸå› 
API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® Optional ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ force unwrap

```swift
let userName = user.name!  // nil ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥
```

## å½±éŸ¿
- 1000ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥
- App Store ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ä½è©•ä¾¡å¢—åŠ 

## è§£æ±ºç­–
```swift
guard let userName = user.name else {
    return "Guest"
}
```
```

**2. æ•™è¨“æŠ½å‡ºã®å•ã„ã‹ã‘**:
```
Q1: ä½•ã‚’å­¦ã‚“ã ã‹ï¼Ÿ
â†’ force unwrap ã¯å±é™ºã€guard/if let ã‚’ä½¿ã†ã¹ã

Q2: ä»–ã«é©ç”¨ã§ãã‚‹ã‹ï¼Ÿ
â†’ ã™ã¹ã¦ã® Optional å‡¦ç†ã«é©ç”¨å¯èƒ½

Q3: ãƒ‘ã‚¿ãƒ¼ãƒ³åŒ–ã§ãã‚‹ã‹ï¼Ÿ
â†’ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨ã—ã¦ä¸€èˆ¬åŒ–å¯èƒ½
```

**3. æ•™è¨“è¨˜éŒ²** (`lessons/best-practices/optional-handling.md`):
```markdown
# Optional ã‚’å®‰å…¨ã«æ‰±ã†

## æ•™è¨“
force unwrap (!) ã¯ä½¿ã‚ãšã€guard/if let ã‚’ä½¿ç”¨

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
```swift
// âŒ Bad
let user = optionalUser!

// âœ… Good
guard let user = optionalUser else { return }
```

## æ ¹æ‹ 
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#042: force unwrap ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ï¼ˆ1000ãƒ¦ãƒ¼ã‚¶ãƒ¼å½±éŸ¿ï¼‰
```

**4. Skillã¸ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**:
```markdown
# ios-development/guides/best-practices.md ã«è¿½åŠ 

## Optional Handling
force unwrap ã‚’é¿ã‘ã€guard/if let ã‚’ä½¿ç”¨ã™ã‚‹ã€‚
è©³ç´°: lessons/best-practices/optional-handling.md

# ios-development/checklists/code-review.md ã«è¿½åŠ 

- [ ] force unwrap (!) ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„ã‹ï¼Ÿ
```

**5. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°**:
```bash
./scripts/update-index.sh
# lessons/index.md ã«è‡ªå‹•è¿½åŠ 
```

---

## æ¤œç´¢æ€§ã®å‘ä¸Š

### 1. ã‚¿ã‚°ã‚·ã‚¹ãƒ†ãƒ 

**å„æ•™è¨“ã«ã‚¿ã‚°ã‚’ä»˜ä¸**:
```markdown
## ã‚¿ã‚°
`swift`, `optional`, `safety`, `crash-prevention`
```

**ã‚¿ã‚°æ¤œç´¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆ** (`scripts/search-lessons.sh`):
```bash
#!/bin/bash

TAG=$1

if [ -z "$TAG" ]; then
    echo "Usage: ./search-lessons.sh <tag>"
    exit 1
fi

echo "ğŸ” Searching lessons with tag: $TAG"
echo ""

grep -r "^\`.*$TAG.*\`" lessons --include="*.md" -l | while read file; do
    title=$(head -n 1 "$file" | sed 's/^# //')
    echo "- $title"
    echo "  $file"
    echo ""
done
```

**ä½¿ç”¨ä¾‹**:
```bash
$ ./scripts/search-lessons.sh optional

ğŸ” Searching lessons with tag: optional

- Optional ã‚’å®‰å…¨ã«æ‰±ã†
  lessons/best-practices/optional-handling.md

- Nil Coalescing ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’æä¾›
  lessons/best-practices/nil-coalescing.md
```

### 2. å…¨æ–‡æ¤œç´¢

**æ¤œç´¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆ** (`scripts/search-content.sh`):
```bash
#!/bin/bash

KEYWORD=$1

echo "ğŸ” Searching for: $KEYWORD"
echo ""

grep -r "$KEYWORD" lessons --include="*.md" -n | while IFS=: read file line content; do
    title=$(head -n 1 "$file" | sed 's/^# //')
    echo "ğŸ“„ $title"
    echo "   $file:$line"
    echo "   $content"
    echo ""
done
```

### 3. ã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

**`lessons/by-category/architecture/index.md`**:
```markdown
# Architecture é–¢é€£ã®æ•™è¨“

## Patterns
- [MVVM Repository](../../patterns/mvvm-repository.md)
- [Coordinator Pattern](../../patterns/coordinator.md)
- [Dependency Injection](../../patterns/dependency-injection.md)

## Anti-Patterns
- [Massive View Controller](../../anti-patterns/massive-view-controller.md)
- [God Object](../../anti-patterns/god-object.md)

## Best Practices
- [SOLID Principles](../../best-practices/solid-principles.md)
```

### 4. README.md ã§ã®ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹

**`lessons/README.md`**:
```markdown
# Lessons Learned - æ•™è¨“ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹

### ã‚ˆãå‚ç…§ã•ã‚Œã‚‹æ•™è¨“ Top 10

1. [Optional Handling](best-practices/optional-handling.md) - 48å›å‚ç…§
2. [MVVM Repository](patterns/mvvm-repository.md) - 32å›å‚ç…§
3. [Instruments ä½¿ã„æ–¹](tools/instruments.md) - 28å›å‚ç…§
4. [Lazy Loading](optimizations/lazy-loading.md) - 24å›å‚ç…§
5. [Async/Await](best-practices/async-await.md) - 22å›å‚ç…§
...

### æœ€è¿‘è¿½åŠ ã•ã‚ŒãŸæ•™è¨“

- 2025-01-15: [SwiftUI PreferenceKey](best-practices/preference-key.md)
- 2025-01-10: [LazyVStack Performance](optimizations/lazy-vstack.md)
- 2025-01-05: [Keychain Security](best-practices/keychain.md)

### ã‚«ãƒ†ã‚´ãƒªåˆ¥

- [Architecture](by-category/architecture/)
- [Testing](by-category/testing/)
- [Performance](by-category/performance/)
- [Security](by-category/security/)
- [Deployment](by-category/deployment/)
```

---

## å®Ÿè·µä¾‹

### ã‚±ãƒ¼ã‚¹1: API ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ** (`incidents/2025/015-api-error.md`):
```markdown
# [MEDIUM] API ã‚¨ãƒ©ãƒ¼æ™‚ã«ã‚¢ãƒ—ãƒªãŒãƒ•ãƒªãƒ¼ã‚º

## åŸå› 
try! ã‚’ä½¿ç”¨ã—ã¦ã„ãŸãŸã‚ã€ã‚¨ãƒ©ãƒ¼æ™‚ã«ã‚¯ãƒ©ãƒƒã‚·ãƒ¥

```swift
let data = try! await api.fetchData()  // ã‚¨ãƒ©ãƒ¼ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥
```

## è§£æ±ºç­–
```swift
do {
    let data = try await api.fetchData()
} catch {
    showErrorAlert(error)
}
```
```

**â†“ æ•™è¨“æŠ½å‡º**

**æ•™è¨“** (`lessons/best-practices/error-handling.md`):
```markdown
# ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯å¿…é ˆ

## æ•™è¨“
try! ã¯ä½¿ã‚ãšã€do-catch ã§é©åˆ‡ã«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹

## å•é¡Œãƒ»èƒŒæ™¯
try! ã‚’ä½¿ã†ã¨ã€ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«ã‚¢ãƒ—ãƒªãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹

```swift
// âŒ Bad: try! ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥
let data = try! await api.fetchData()

// âŒ Bad: try? ã§ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–
let data = try? await api.fetchData()  // nil ã«ãªã‚‹ã ã‘
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```swift
// âœ… Good: do-catch ã§é©åˆ‡ã«å‡¦ç†
func loadData() async {
    do {
        let data = try await api.fetchData()
        updateUI(data)
    } catch APIError.unauthorized {
        showLoginScreen()
    } catch APIError.networkError {
        showRetryButton()
    } catch {
        showErrorAlert(error.localizedDescription)
    }
}
```

## ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼å‹

```swift
enum APIError: Error {
    case unauthorized
    case networkError
    case serverError(Int)
    case decodingError

    var message: String {
        switch self {
        case .unauthorized:
            return "ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™"
        case .networkError:
            return "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã€‚æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„"
        case .serverError(let code):
            return "ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ï¼ˆ\(code)ï¼‰"
        case .decodingError:
            return "ãƒ‡ãƒ¼ã‚¿å½¢å¼ãŒä¸æ­£ã§ã™"
        }
    }
}
```

## åŠ¹æœãƒ»ãƒ¡ãƒªãƒƒãƒˆ

- ã‚¯ãƒ©ãƒƒã‚·ãƒ¥é˜²æ­¢
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é©åˆ‡ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- ãƒ‡ãƒãƒƒã‚°ãŒå®¹æ˜“

## ã„ã¤ä½¿ã†ã‹

- ã™ã¹ã¦ã® API å‘¼ã³å‡ºã—
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹
- ãƒ•ã‚¡ã‚¤ãƒ« I/O
- å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä½¿ç”¨

## æ³¨æ„ç‚¹

- try? ã¯æœ¬å½“ã«ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ã—ã¦è‰¯ã„å ´åˆã®ã¿ä½¿ç”¨
- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¯å¿…ãšè¨˜éŒ²ï¼ˆAnalyticsã€Crashlyticsï¼‰

```swift
} catch {
    logger.error("API fetch failed: \(error)")
    analytics.logError(error)
    throw error
}
```

## æ ¹æ‹ ãƒ»äº‹ä¾‹

- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#015: try! ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#089: try? ã§ã‚¨ãƒ©ãƒ¼è¦‹é€ƒã—

## é–¢é€£

- [async-await.md](async-await.md)
- [logging.md](../tools/logging.md)

## ã‚¿ã‚°

`swift`, `error-handling`, `api`, `crash-prevention`

## æ›´æ–°å±¥æ­´

- 2025-01-15: åˆç‰ˆä½œæˆ
```

**â†“ Skillã¸ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**

**`ios-development/checklists/code-review.md`**:
```markdown
## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] try! ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„ã‹ï¼Ÿï¼ˆã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒªã‚¹ã‚¯ï¼‰
- [ ] try? ã®ä½¿ç”¨ã¯é©åˆ‡ã‹ï¼Ÿï¼ˆã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ã—ã¦ã„ãªã„ã‹ï¼‰
- [ ] ã™ã¹ã¦ã® throws é–¢æ•°ã¯ do-catch ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ
- [ ] ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼å‹ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’è¨˜éŒ²ã—ã¦ã„ã‚‹ã‹ï¼Ÿ

å‚è€ƒ: lessons/best-practices/error-handling.md
```

### ã‚±ãƒ¼ã‚¹2: SwiftUI ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

**ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ** (`incidents/2025/023-slow-scroll.md`):
```markdown
# [MEDIUM] ãƒªã‚¹ãƒˆã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒé‡ã„

## åŸå› 
ForEach ã§1000ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€åº¦ã«æç”»

```swift
ScrollView {
    VStack {
        ForEach(items) { item in
            ItemView(item: item)  // 1000å€‹
        }
    }
}
```

## è§£æ±ºç­–
LazyVStack ã§å¿…è¦ãªã‚‚ã®ã ã‘æç”»

```swift
ScrollView {
    LazyVStack {
        ForEach(items) { item in
            ItemView(item: item)
        }
    }
}
```
```

**â†“ æ•™è¨“æŠ½å‡º**

**æ•™è¨“** (`lessons/optimizations/lazy-loading.md`):
```markdown
# Lazy Loading ã§å¤§é‡ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã‚’æœ€é©åŒ–

## æ•™è¨“
å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºã«ã¯ LazyVStack/LazyVGrid ã‚’ä½¿ç”¨

## å•é¡Œãƒ»èƒŒæ™¯

é€šå¸¸ã® VStack/HStack ã¯ã€ã™ã¹ã¦ã®å­ View ã‚’å³åº§ã«ç”Ÿæˆãƒ»æç”»ã™ã‚‹ã€‚
å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®å ´åˆã€ãƒ¡ãƒ¢ãƒªæ¶ˆè²»ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå•é¡Œã«ãªã‚‹ã€‚

```swift
// âŒ Bad: ã™ã¹ã¦ä¸€åº¦ã«æç”»
ScrollView {
    VStack {
        ForEach(0..<1000) { i in
            Text("Item \(i)")
        }
    }
}
// â†’ 1000å€‹ã® View ã‚’å³åº§ã«ç”Ÿæˆ
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```swift
// âœ… Good: å¿…è¦ãªã‚‚ã®ã ã‘æç”»
ScrollView {
    LazyVStack {
        ForEach(0..<1000) { i in
            Text("Item \(i)")
        }
    }
}
// â†’ ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹åˆ†ã ã‘ç”Ÿæˆ
```

## LazyVGrid ã§ã®ç”»åƒè¡¨ç¤º

```swift
ScrollView {
    LazyVGrid(columns: [
        GridItem(.flexible()),
        GridItem(.flexible()),
        GridItem(.flexible())
    ], spacing: 10) {
        ForEach(items) { item in
            AsyncImage(url: URL(string: item.imageURL)) { image in
                image
                    .resizable()
                    .aspectRatio(contentMode: .fill)
            } placeholder: {
                ProgressView()
            }
            .frame(width: 100, height: 100)
            .clipped()
        }
    }
    .padding()
}
```

## åŠ¹æœãƒ»ãƒ¡ãƒªãƒƒãƒˆ

| æŒ‡æ¨™ | VStack | LazyVStack | æ”¹å–„ |
|------|--------|-----------|------|
| åˆæœŸãƒ­ãƒ¼ãƒ‰æ™‚é–“ | 3.5ç§’ | 0.3ç§’ | â–¼ 91% |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | 400MB | 80MB | â–¼ 80% |
| ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« FPS | 20fps | 60fps | 3å€ |

## ã„ã¤ä½¿ã†ã‹

- ãƒªã‚¹ãƒˆè¡¨ç¤ºãŒ50ä»¶ä»¥ä¸Š
- ç”»åƒãƒ»å‹•ç”»ãªã©ã®é‡ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé‡è¦

## æ³¨æ„ç‚¹

### 1. onAppear ã®æŒ™å‹•ãŒç•°ãªã‚‹

```swift
LazyVStack {
    ForEach(items) { item in
        ItemView(item: item)
            .onAppear {
                // ç”»é¢ã«è¡¨ç¤ºã•ã‚ŒãŸæ™‚ã«å‘¼ã°ã‚Œã‚‹
                print("Appeared: \(item.id)")
            }
    }
}
```

### 2. View ã®ã‚µã‚¤ã‚ºã‚’äº‹å‰ã«æŒ‡å®š

```swift
// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š
LazyVStack(spacing: 0) {
    ForEach(items) { item in
        ItemView(item: item)
            .frame(height: 100)  // å›ºå®šé«˜ã•
    }
}
```

## æ ¹æ‹ ãƒ»äº‹ä¾‹

- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#023: ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒé‡ã„ â†’ LazyVStack ã§è§£æ±º
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆ#067: ãƒ¡ãƒ¢ãƒªã‚¯ãƒ©ãƒƒã‚·ãƒ¥ â†’ Lazy + ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§è§£æ±º
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆB: ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ 3.2 â†’ 4.5

## é–¢é€£

- [caching-strategy.md](caching-strategy.md)
- [image-optimization.md](image-optimization.md)
- swiftui-patterns/guides/03-performance-best-practices.md

## ã‚¿ã‚°

`swiftui`, `performance`, `lazy`, `optimization`

## æ›´æ–°å±¥æ­´

- 2025-01-20: åˆç‰ˆä½œæˆ
- 2025-01-25: LazyVGrid ã®ä¾‹ã‚’è¿½åŠ 
```

---

## ã¾ã¨ã‚

### ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰ã®ãƒã‚¤ãƒ³ãƒˆ

1. **ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‹ã‚‰å­¦ã¶**: ã™ã¹ã¦ã®ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‹ã‚‰æ•™è¨“ã‚’æŠ½å‡º
2. **ä¸€èˆ¬åŒ–ã™ã‚‹**: ç‰¹å®šã®äº‹ä¾‹ã‚’æ™®éçš„ãªåŸå‰‡ã«æ˜‡è¯
3. **ä½“ç³»çš„ã«åˆ†é¡**: æ¢ã—ã‚„ã™ãã€å†åˆ©ç”¨ã—ã‚„ã™ã„æ§‹é€ 
4. **ç¶™ç¶šçš„ã«æ›´æ–°**: é™³è…åŒ–ã—ãŸæ•™è¨“ã¯å‰Šé™¤ãƒ»æ›´æ–°
5. **ãƒãƒ¼ãƒ ã§æ´»ç”¨**: å€‹äººã®å­¦ã³ã‚’ãƒãƒ¼ãƒ ã®è³‡ç”£ã«

### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

**æ•™è¨“è¨˜éŒ²æ™‚**:
- [ ] ä¸€æ–‡ã§æ•™è¨“ã‚’è¦ç´„ã§ãã¦ã„ã‚‹ã‹
- [ ] ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’å«ã‚ã¦ã„ã‚‹ã‹
- [ ] æ ¹æ‹ ï¼ˆã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç•ªå·ï¼‰ã‚’è¨˜è¼‰ã—ã¦ã„ã‚‹ã‹
- [ ] ã„ã¤ä½¿ã†ã‹ã‚’æ˜è¨˜ã—ã¦ã„ã‚‹ã‹
- [ ] ã‚¿ã‚°ã‚’ä»˜ä¸ã—ã¦ã„ã‚‹ã‹

**ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹é‹ç”¨**:
- [ ] é€±æ¬¡ã§ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆã‹ã‚‰æ•™è¨“æŠ½å‡º
- [ ] æœˆæ¬¡ã§index.mdæ›´æ–°
- [ ] å››åŠæœŸã§æ•™è¨“ã®è¦‹ç›´ã—ï¼ˆé™³è…åŒ–ãƒã‚§ãƒƒã‚¯ï¼‰
- [ ] æ–°ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«æ´»ç”¨

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **02-team-learning.md**: ãƒãƒ¼ãƒ å­¦ç¿’ãƒ—ãƒ­ã‚»ã‚¹ã®å®Ÿè·µ
2. **03-continuous-improvement.md**: ç¶™ç¶šçš„æ”¹å–„ã‚µã‚¤ã‚¯ãƒ«

**é–¢é€£ã‚¹ã‚­ãƒ«**:
- `incident-logger`: æ•™è¨“ã®å…ƒã¨ãªã‚‹ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆè¨˜éŒ²
- ã™ã¹ã¦ã®Skills: æ•™è¨“ã‚’å„Skillã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

---

*çŸ¥è­˜ã¯å…±æœ‰ã™ã‚‹ã“ã¨ã§ä¾¡å€¤ãŒå€å¢—ã—ã¾ã™ã€‚ãƒãƒ¼ãƒ ã®å­¦ã³ã‚’è³‡ç”£ã«å¤‰ãˆã¾ã—ã‚‡ã†ã€‚*
