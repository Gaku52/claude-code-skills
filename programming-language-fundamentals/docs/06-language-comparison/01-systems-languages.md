# システム言語比較（C, C++, Rust, Go, Zig）

> システム言語は「ハードウェアに近い制御」と「高いパフォーマンス」を提供する。OS、ドライバ、ゲームエンジン、インフラツールの基盤。

## この章で学ぶこと

- [ ] 主要システム言語の特徴と適用領域を把握する
- [ ] メモリ管理戦略の違いを理解する
- [ ] 安全性とパフォーマンスのトレードオフを判断できる

---

## 1. 比較表

```
┌──────────────┬────────┬────────┬────────┬────────┬────────┐
│              │ C      │ C++    │ Rust   │ Go     │ Zig    │
├──────────────┼────────┼────────┼────────┼────────┼────────┤
│ 登場年        │ 1972   │ 1985   │ 2015   │ 2012   │ 2016   │
├──────────────┼────────┼────────┼────────┼────────┼────────┤
│ メモリ管理    │ 手動   │ 手動   │ 所有権 │ GC     │ 手動   │
│              │ malloc │ RAII   │ Borrow │ 並行GC │ alloc  │
├──────────────┼────────┼────────┼────────┼────────┼────────┤
│ 安全性        │ 低い   │ 中程度 │ 高い   │ 高い   │ 中程度 │
├──────────────┼────────┼────────┼────────┼────────┼────────┤
│ パフォーマンス│ 最速   │ 最速   │ 最速   │ 高速   │ 最速   │
├──────────────┼────────┼────────┼────────┼────────┼────────┤
│ コンパイル速度│ 速い   │ 遅い   │ 遅い   │ 非常速 │ 速い   │
├──────────────┼────────┼────────┼────────┼────────┼────────┤
│ 学習コスト    │ 中程度 │ 高い   │ 高い   │ 低い   │ 中程度 │
├──────────────┼────────┼────────┼────────┼────────┼────────┤
│ 主な用途      │ OS     │ ゲーム │ インフラ│ クラウド│ 組み込み│
│              │ 組み込み│ ブラウザ│ CLI    │ ツール │ システム│
│              │ カーネル│ DB     │ Wasm   │ マイクロ│        │
└──────────────┴────────┴────────┴────────┴────────┴────────┘
```

---

## 2. 同じ処理の比較

```c
// C: 手動メモリ管理
#include <stdlib.h>
#include <string.h>

char* greet(const char* name) {
    char* result = malloc(strlen(name) + 10);
    if (!result) return NULL;  // エラー処理
    sprintf(result, "Hello, %s!", name);
    return result;  // 呼び出し側が free する必要がある
}
```

```cpp
// C++: RAII + スマートポインタ
#include <string>
#include <memory>

std::string greet(const std::string& name) {
    return "Hello, " + name + "!";  // 自動メモリ管理
}
```

```rust
// Rust: 所有権システム
fn greet(name: &str) -> String {
    format!("Hello, {}!", name)  // 所有権が呼び出し元に移動
}
```

```go
// Go: GC
func greet(name string) string {
    return fmt.Sprintf("Hello, %s!", name)  // GCが管理
}
```

---

## 3. 適用領域

```
OS カーネル        → C（Linux）, Rust（Linux新モジュール）
ブラウザ           → C++（Chromium）, Rust（Firefox/Servo）
データベース       → C++（MySQL）, Rust（SurrealDB, TiKV）
ゲームエンジン     → C++（Unreal, Unity内部）
クラウドインフラ   → Go（Docker, K8s, Terraform）
CLI ツール         → Rust（ripgrep, bat, fd）, Go（gh, lazygit）
組み込み           → C, Zig, Rust
WebAssembly        → Rust, C/C++, Zig
暗号・セキュリティ → Rust, C
```

---

## 4. 選択指針

```
パフォーマンスが最重要 + レガシー互換 → C/C++
パフォーマンス + メモリ安全性         → Rust
シンプル + 高速コンパイル + 並行処理  → Go
C の代替 + 組み込み                   → Zig
ゲーム + リアルタイム                 → C++
クラウドネイティブツール              → Go or Rust
```

---

## まとめ

| 言語 | 哲学 | 最適なユースケース |
|------|------|-----------------|
| C | 最小限の抽象化 | OS, カーネル, 組み込み |
| C++ | ゼロコスト抽象化 | ゲーム, ブラウザ, DB |
| Rust | 安全性+パフォーマンス | インフラ, CLI, Wasm |
| Go | シンプルさ+並行処理 | クラウド, マイクロサービス |
| Zig | C のモダン代替 | 組み込み, システム |

---

## 次に読むべきガイド
→ [[02-jvm-languages.md]] — JVM言語比較

---

## 参考文献
1. Blandy, J., Orendorff, J. & Tindall, L. "Programming Rust." 2nd Ed, O'Reilly, 2021.
2. Donovan, A. & Kernighan, B. "The Go Programming Language." Addison-Wesley, 2015.
