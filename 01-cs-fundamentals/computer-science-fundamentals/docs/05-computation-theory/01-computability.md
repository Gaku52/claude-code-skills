# 計算可能性

> 「全ての問題がコンピュータで解けるわけではない」——この事実はCS最大の発見の一つであり、停止問題の決定不能性がその象徴である。

## この章で学ぶこと

- [ ] チューリングマシンの概念を説明できる
- [ ] 停止問題が決定不能であることを理解する
- [ ] 決定可能と決定不能の境界を理解する

---

## 1. チューリングマシン

```
チューリングマシン: 計算の理論的モデル

  構成:
  ┌──────────────────────────────────────────────┐
  │ ... │ B │ 1 │ 0 │ 1 │ 1 │ B │ B │ ...      │ ← 無限テープ
  └──────────────────────────────────────────────┘
                    ↑
                 ヘッド（読み書き）
                 ┌─────┐
                 │ 状態q│ ← 有限制御
                 └─────┘

  動作: (現在の状態, 読んだ記号) → (書く記号, ヘッド移動, 次の状態)

  チャーチ=チューリングの提唱:
  「計算可能な全ての関数はチューリングマシンで計算できる」
  → Python, C, Haskell, λ計算 ... 全て等価な計算能力
  → プログラミング言語の選択は計算能力に影響しない
```

---

## 2. 停止問題

### 2.1 決定不能の証明

```
停止問題: 「プログラムPが入力xで停止するか？」を判定するプログラムは存在しない

  背理法による証明:

  仮定: 停止判定プログラム halt(P, x) が存在するとする
    halt(P, x) = True  (Pがxで停止する場合)
    halt(P, x) = False (Pがxで停止しない場合)

  矛盾の構築:
  プログラム D(P):
    if halt(P, P):    # PにP自身を入力した時に停止するなら
      無限ループ       # 停止しない
    else:              # 停止しないなら
      return           # 停止する

  D(D) を考える:
  - D(D)が停止する → halt(D,D)=True → Dは無限ループ → 停止しない 矛盾！
  - D(D)が停止しない → halt(D,D)=False → Dはreturn → 停止する 矛盾！

  → halt は存在しえない ∎

  実務的な帰結:
  - 完璧なウイルス検出器は作れない
  - コンパイラは全てのバグを検出できない
  - 「このプログラムは正しいか？」を自動判定する万能ツールは不可能
```

### 2.2 決定可能と決定不能

```
問題の分類:

  決定可能（Decidable）:
  - 素数判定
  - ソートの正しさ検証
  - 有限オートマトンの等価性判定
  - 文脈自由文法の所属判定

  決定不能（Undecidable）:
  - 停止問題
  - ポスト対応問題
  - 2つのプログラムが同じ関数を計算するか
  - プログラムが全ての入力で停止するか（全域性）

  半決定可能（Semi-decidable）:
  - 停止する場合は検出できるが、停止しない場合は永遠に待つ
  - 例: プログラムを実行して停止を待つ（停止しない場合は分からない）
```

---

## 3. 実践演習

### 演習1: チューリングマシン（基礎）
2進数を1増やすチューリングマシンの遷移表を設計せよ。

### 演習2: 停止問題の帰結（応用）
「全ての入力に対して正しい出力を返すか」を自動判定するツールが不可能であることを、停止問題への帰着で証明せよ。

---

## まとめ

| 概念 | ポイント |
|------|---------|
| チューリングマシン | 計算の理論的モデル。全ての言語と等価 |
| 停止問題 | 決定不能。完璧なバグ検出器は存在しない |
| チャーチ=チューリング | 計算可能 = チューリングマシンで計算可能 |

---

## 次に読むべきガイド
→ [[02-complexity-theory.md]] — 計算複雑性理論

---

## 参考文献
1. Sipser, M. "Introduction to the Theory of Computation." Chapters 3-5.
2. Turing, A. M. "On Computable Numbers." 1936.
